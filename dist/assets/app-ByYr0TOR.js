class o{constructor(t){this.menuElement=t,this.menuToggle=this.menuElement.querySelector(".menu-toggle"),this.submenuToggles=this.menuElement.querySelectorAll("button.menu-link"),this.submenus=this.menuElement.querySelectorAll('[data-level="2"]'),this.menuState="closed",this.transitionTiming=250,this.init()}init(){this.setHeight(),this.close(),document.addEventListener("click",t=>{let e=t.target;do{if(e==this.menuElement){if(t.target==this.menuToggle){this.toggle();return}this.submenuToggles.forEach(s=>{if(s==t.target){this.toggleSubmenu(t.target);return}});return}e=e.parentNode}while(e);this.close()})}setHeight(){const t=parseInt(getComputedStyle(document.documentElement).fontSize),e=this.menuElement.querySelector(".menu-list").offsetHeight;this.menuElement.style.setProperty("--menu-height",e/t+"rem"),this.submenus.forEach(s=>{const n=s.offsetHeight;s.style.setProperty("--submenu-height",n/t+1.5+"rem")})}toggle(){this.menuElement.style.setProperty("--menu-transition-timing",this.transitionTiming+"ms"),this.menuState=="open"?this.close():this.open()}toggleSubmenu(t){const e=t.closest(".menu-list-item");this.submenus.forEach(s=>{const n=s.closest(".menu-list-item");n==e?e.dataset.state=e.dataset.state=="closed"?"open":"closed":n.dataset.state="closed"})}killTransition(){setTimeout(()=>{this.menuElement.style.setProperty("--menu-transition-timing","0ms")},this.transitionTiming)}open(){this.updateState("open")}close(){this.submenus.forEach(t=>{t.closest("li").dataset.state="closed"}),this.updateState("closed"),this.killTransition()}updateState(t){this.menuElement.dataset.state=t,this.menuState=t,document.documentElement.dataset.menuState=t}}const i=document.querySelector("nav.menu");i&&(console.log(i),new o(i));
